title: 深入理解计算机系统 Chap7
date: 2014-09-26 13:41:51
tags: [读书,笔记]
---

Chap7 链接
--------
### 7.1 编译器驱动程序 ###
大多数编译系统提供**编译驱动程序（compiler driver）**，它代表用户在需要时调用语言预处理器，编译器，汇编器和链接器。
以`gcc -O2 -g p main.c swap.c`为例，会有这样子的过程：  
main.c-->  
cpp(c预处理器)-->main.i（被翻译成的ASCII码的中间文件）  
-->ccl（C编译器）-->main.s（ASCII汇编语言文件）  
-->as(汇编器)-->main.o（**可重定位目标文件（relocatable object file）**）
-->ld(链接器）-->p（**可执行目标文件（executable object file)**）。

### 7.2 静态链接 ###

### 7.3 目标文件 ###

### 7.4 可重定位目标文件

### 7.5 符号和符号表

### 7.6 符号解析
>C++和Java重载的实现，是通过对链接器符号的毁坏（mangling）来实现的。
>编译器会将每个唯一的方法和参数列表组合编码成一个对链接器而言唯一的名字。比如`Foo:bar(int, long)`会被解析成`bar_ _3Fooil`

#### 如何加载有多重定义的全局符号
函数和已初始化的全局变量是强符号，未初始化的全局变量是弱符号。Unix链接器使用下面的规则来处理多重定义的符号：
1. 不允许多个强符号
2. 如果有一个强符号和多个弱符号，则选择强符号
3. 如果有多个弱符号，则从中任意选择
4. 
### 7.7 重定位

### 7.8 可执行目标文件

### 7.9 加载可执行目标文件

### 7.10 动态链接共享库 

### 7.11 从应用中加载和链接共享库

### 7.12 与位置无关的代码（PIC)
