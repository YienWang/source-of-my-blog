title: 网易Android的面试
date: 2014-09-30 20:02:29
tags: [面试,android]
---
前言
-------------
第一轮的面试其实感觉只是在扯扯淡，也才十几分钟。第二轮的话才稍微有点技术性的内容。说得有点乱，个人觉得是自己平时没怎么总结。现在可以写一下了~

正文
--------------
### 对于平板上的应用开发，在界面上你有什么想法？
一问到这个问题，第一个想起来就是`Fragment`。没怎么组织语言，就直接说出来了。  
如果一个应用要同时做小屏和大屏，可以用`Fragment`来做。它是Android在3.0之后提出来一种界面实现，使用`Fragment`的话，可以在资源文件中分别定义不同的布局（而不用修改逻辑）。也可以在代码动态实现，不过会比较麻烦。

### 推送怎么做？
最简单粗暴的方式是轮询，定期向服务器查询有没新内容。其次是用socket跟更服务长连接，不过会比较费电。另外一种方式就是使用第三方了，使用极光推送跟AVOS都可以做到。因为推送对服务器而言也是工作量比较大的，使用第三方会是不错的选择。
【说到socket，最近想试下websocket这个协议写个demo啊，不过先把node服务器搭了再说= =】

### 应用要如何省电？
【这个我真不知道怎么做。。。。】减少操作，减少多线程。可以使用缓存的话尽量多用缓存之类的？
设置网络超时，而不是让网络请求持续地做。
1. 动画要节制。交互的动画要尽量控制好。虽然HWA，但太过酷炫的动画效果也是需要性能的代价的。
2. 较少不必要的进程处理。举个简单的例子，有时在列表中会使用缩放bitmap。与其每次创建列表都重新缩放，不如适当地缓存，减少缩放的操作。

可供参考的资料：[开发者分享][1]
### SQLite的特点
只回答了是单线程访问，而且是表级锁。另外，SQLite对于单条操作都具有原子性，多条操作提供了事务的选择。

### 反射知道是什么吗？

### 知道是什么内存泄露吗？
最近在看《Effective Java》，上面提到的说法很赞。内存泄露也就是*无意识的对象保留*。通常是你使用某个对象，使用完之后却没有清除掉对象的对应引用，使得对象不会被GC回收，你也无法使用。

### 如果出现了内存泄露，要怎么检测？
如果是Android里面，Android提供的DDMS里面提供了很好的检测工具【具体名字我竟然忘了= =查了下是`Heap`这个tab】。在这个选项卡里面点击`cause GC`,可以手动触发垃圾回收。之后可以在下面看到一个叫做`data object`的信息，这个时候再操作应用，边查看这一项，如果这一项持续增加不会下降那么就说明存在内存泄露。  
检测出存在内存泄露这种现象之后，可以使用MAT来进行更加细致的内存分析。将堆内存导出的trace文件【这里又搞错了！！！是hprof文件！！，trace是method profile的时候导出来的】,看一下`suspect leak`，跟踪从`GC Root`到对象的强引用和软引用。 

### 应用的进程可能会被360之类的杀掉，有什么办法可以避免吗？
双服务（Service）双进程。【我后来扯着扯着就扯到线程去了你个混蛋= =】
其中一个进程就是应用的主进程，另外是一个守护进程。一旦一个主进程被杀掉，那么守护进程就负责恢复主进程。

### 我自己问的问题：使用开源项目有什么要求？
知道了面试官是搞iOS的，然后我就问了这个问题（其实是一面的面试官问我的问题）**“没什么要求”**，他是这么说的。实际使用的时候，考虑的是能够实现功能即可。如果后来真的出现了性能上的问题，自己再定制也是不晚的。  
答案有点意外，不过想想也确认如面试官说的。实现了功能再说，性能是其次的。性能调用是个永恒的话题,*过早优化是万恶之源*，高老头如实说。
看到一个来自[知乎的答案][1]
> 过早指的不是在开发过程的早期，而是在还没弄清楚需求未来的变化的走向的时候。你的优化不仅可能导致你无法很好地实现新的需求，而且你对优化的预期的猜测有可能还是错的，导致实际上你除了把代码变复杂以外什么都没得到。 --vczh


补充
----------


参考资料
------------
[怎么看待“提前优化是万恶之源”][1]
[开发者分享:如何让应用更省电][2]
[Android：如何在传输数据的时候花更少的电][3]
[sony:Reducing power consumption of connected apps][4]
[1]: http://www.zhihu.com/question/24282796
[2]: http://it.sohu.com/20130806/n383502784.shtml
[3]: http://developer.android.com/training/efficient-downloads/index.html
[4]: http://developer.sonymobile.com/2010/08/23/android-tutorial-reducing-power-consumption-of-connected-apps/
[5]: https://dl.google.com/io/2009/pres/W_0300_CodingforLife-BatteryLifeThatIs.pdf