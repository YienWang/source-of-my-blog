title: Ruby是个好语言--吗？-《代码的未来》
date: 2014-10-23 20:02:22
category: 读书
tags: [读后感,吐槽]
---
前言
--------
好了，我大概不怎么想把这本书的每个章节总结都过一遍再来讲自己想说的。写篇读完这本书之后关于Ruby的想法吧，因为这也是我读完这本书之后最大的感受，也是从头到尾影响我对这本书评价的想法

正文
-----------
这本书看到一半我就想做出这个动作(╯‵□′)╯︵┻━┻，最后还是忍着看完了。翻下目录，会发现这本书介绍了不少蛮高级的话题。当初想读这本书也是觉得大概从某个语言的创始人来看待这些话题会更加透彻，但我大概是想错了。  
具体的内容真要回忆的话其实并记不得多少，大概是一开始就被作者王婆卖瓜般一次又一次地夸他家的Ruby给烦到了，后来很多内容真心没怎么留意。而有些章节又涉及到太多Unix编程，对于不熟悉这些调用的我来说，是完全陌生的事物。  
好了，开始说下我在读这本书时心中最大的怨念：
> 一而再再而三地说Ruby，不烦吗？一说到某个语言特性，就说“Ruby也是这样子呢”，“这个Ruby一开始就做了，是不是参考了Ruby了呢”，就连一个域名你都能说是“Ruby似乎开创了先例呢”，就好像什么都在抄Ruby一样。我真心想呵呵，松本你到底有多臭美= =

我没怎么使用过这门语言，谈经验大概也就是一个HelloWorld的程度。翻过《七周七语言》中关于Ruby的介绍，在之后用过Ruby写的静态博客框架OctoPress，后来转向hexo。  
在InfoQ上有稍微看过一些关于Ruby新闻，有好的，也有坏的。曾听说Ruby是在硅谷创业的互联网公司首选的语言，因为Ruby on Rail适用于快速开发，在前期极具诱惑力。不过也应该说创业风险大吧，能发展到一定用户群体的公司不多，遇到Ruby瓶颈的情况不多---在面对C10K现象时Ruby是非常无力的。之前就有报道说某公司最终从Ruby转向了AKKA（Netty？）这样的框架，因为Ruby无法再支持他们的业务。  
在这本书上，其实可以稍微看出一点端倪。在2012年时的RVM才刚能使用`pthread`支持线程，一般的并发竟然是要使用进程。进程通信跟线程通信是一回事吗？松本竟然说更乐意用多进程并发，这种说法难道不是偏颇于Ruby？
Ruby是一门动态的解释型语言。它很灵活，灵活性通常以性能为代价，而Ruby是个明显的例子。Ruby始终上不了大公司的台面，因为一旦网站的连接数高到一定程度，使用Ruby就不会是个正确的选择。作者说动态类型跟静态类型性能的差距会逐渐缩短，因为JIT跟其他优化技术使得解释器的效率能比得上编译执行的程度代码。从大方向来说，我非常认可。但前提是有没有干爹啊。  
Java是编译成字节码之后由JVM解释执行的，一开始推出的时候JVM的效率之低让其受尽吐槽。在IBM跟Sun这两个干爹的协助下，JIT以及各种激进优化都在JVM上使用了，GC回收器的效率也逐渐提高。现在的Java的执行效率有时甚至能够超过C/C++。再说说JavaScript这个脚本语言，JavaScript原本是有多低效，我大概没什么经验。 
元编程其实也就是用程序来编写程序，这是静态编译语言所做不到的（应该是动态解释行的才行？）。这种编程方式灵活度更高，但相对应的，阅读成本也越高。
关于GC的内容似乎没有可谈的，一开始普及了标记回收和标记复制几种常用的回收算法。再后来又提到了现代的GC方式，如分代回收，增量回收和并行回收。最后作者提到了GC大统一的理论，这个理论倒是第一次听说，如果不是要优化JVM，这些内容作为谈资知道即可。  
闭包这块的内容倒是蛮有价值的，将环境与函数对象整个包装并返回的对象即是闭包。似乎也可以说是lambda表达式，只是lambda表达式并不是一个小章节就能描述清楚的吧，书上接下来的那些内容也是类似，对于没有太多Unix编程经验的人，你一下子给我搬上那些系统调用，我能够看懂吗？总体上来说，这本书有部分内容不是普及向，介绍也太过精简。不是本好书。



最后再回来谈谈Ruby吧，我没怎么使用过这门语言，谈经验也就是一个HelloWorld的程度。之前有稍微关注过一些新闻，有好的，也有坏的。曾经听说Ruby是在硅谷创业的互联网公司首选的语言，因为Ruby on Rail适用于快速开发，在前期极具诱惑力。不过也应该说创业风险大吧，能发展到一定用户群体的公司不多，于是也就没碰到Ruby的瓶颈---在面对C10K现象是Ruby是非常无力的。在InfoQ上看到一个公司的架构转型，从Ruby转向了AKKA（还是Netty？）这样的框架。  
其实在书上，作者也提及了，Ruby在2012年时的RVM才刚能使用`pthread`支持线程，一般的并发竟然是要使用进程。跨进程通信跟跨线程通信是一回事吗？松本竟然说更乐意用多进程并发，这种说法难道不是偏颇于Ruby？  
突然想起，其实我前阵子才用过一个用Ruby写的叫OctoPress的博客系统。在试过hexo之后，我果然就把OctoPress换掉了。
